{% extends 'memberships/profile-base.html' %}

{% block profile %}
<div id="user-profile-2" class="user-profile">
	<div class="tabbable">
		<ul class="nav nav-tabs padding-18">
			<li class="active">
				<a data-toggle="tab" href="#home">
					<i class="green ace-icon fa fa-user bigger-120"></i>
					Profile
				</a>
			</li>

			<li>
				<a data-toggle="tab" href="#feed">
					<i class="orange ace-icon fa fa-rss bigger-120"></i>
					Activity Feed
				</a>
			</li>
			<li>
			  <a data-toggle="tab" href="#update">
				<i class="orange ace-icon fa fa-rss bigger-120"></i>
				  Update Profile
			  </a>
			</li>
			<li>
				<a data-toggle="tab" href="#friends">
				  <i class="orange ace-icon fa fa-rss bigger-120"></i>
					Friends
				</a>
			</li>
		</ul>

		<div class="tab-content no-border padding-24">
			<div id="home" class="tab-pane in active">
				<div class="row">
					<div class="col-xs-12 col-sm-3 center">
						{% if not user_membership.avatar %}

						<span class="profile-picture">
								<img class="editable img-responsive" alt=" Avatar" id="avatar2" src="http://bootdey.com/img/Content/avatar/avatar6.png">
						</span>
						{% else %}
						<span class="profile-picture">
								<img class="editable img-responsive" alt=" Avatar" id="avatar2" src="{{ user_membership.avatar.url }}">
							</span>
						{% endif %}

						<div class="space space-4"></div>


					</div><!-- /.col -->

					<div class="col-xs-12 col-sm-9">
						<h4 class="blue">
							<span class="middle">{{ user_membership.first_name }} {{ user_membership.last_name }}</span>

							<span class="label label-purple arrowed-in-right">
								<i class="ace-icon fa fa-circle smaller-80 align-middle"></i>
								online
							</span>
						</h4>

						<div class="profile-user-info">
							<div class="profile-info-row">
								<div class="profile-info-name"> Username </div>

								<div class="profile-info-value">
									<span>{{ user.username }}</span>
								</div>
							</div>

							<div class="profile-info-row">
								<div class="profile-info-name"> Location </div>

								<div class="profile-info-value">
									<i class="fa fa-map-marker light-orange bigger-110"></i>
									<span>{{ user_membership.location }}</span>
								</div>
							</div>

							<div class="profile-info-row">
								<div class="profile-info-name"> Birth Date </div>

								<div class="profile-info-value">
									<span>{{ user_membership.birth_date }}</span>
								</div>
							</div>

							<div class="profile-info-row">
								<div class="profile-info-name"> Joined </div>

								<div class="profile-info-value">
									<span>{{ user_subscription.get_created_date }}</span>
								</div>
							</div>
							{% if user_subscription != None %}
							<div class="profile-info-row">
								<div class="profile-info-name"> Membership Type </div>

								<div class="profile-info-value">
									<span>{{ user_membership.membership.membership_type }}</span>
								</div>
							</div>
							{% endif %}
						</div>

						<div class="hr hr-8 dotted"></div>

						<div class="profile-user-info">
							<div class="profile-info-row">
									{% if user_subscription.active != False %}
								<div class="profile-info-name">Next Payment</div>
								<div class="profile-info-value">
									<a href="#" target="_blank">{{ user_subscription.get_next_billing_date }}</a>
								</div>
								{% endif %}
							</div>

							<div class="profile-info-row">
								<div class="profile-info-name">
									Upgrade Membership
								</div>

								<div class="profile-info-value">
									<a href="{% url 'memberships:select' %}">Click here to upgrade account</a>
								</div>
							</div>

							<div class="profile-info-row">
									<div class="profile-info-name">
										<i class="middle ace-icon fa fa-facebook-square bigger-150 blue"></i>
									</div>

									<div class="profile-info-value">
										<a href="#">Find me on Facebook</a>
									</div>
								</div>
						</div>
					</div><!-- /.col -->
				</div><!-- /.row -->

				<div class="space-20"></div>

				<div class="row">
					<div class="col-xs-12 col-sm-6">
						<div class="widget-box transparent">
							<div class="widget-header widget-header-small">
								<h4 class="widget-title smaller">
									<i class="ace-icon fa fa-check-square-o bigger-110"></i>
									Little About Me
								</h4>
							</div>

							<div class="widget-body">
								<div class="widget-main">
									<p>{{ user_membership.bio }}</p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div><!-- /#home -->

			<div id="feed" class="tab-pane">
				<div class="profile-feed row">
					<div class="col-sm-6">
						<div class="profile-activity clearfix">
							{% for post in posts %}
							<div>
								<a class="user" href="#"> {{ user.username }} </a>
								<h3>{{ post.title }}</h3>
								<a href="{{ post.get_absolute_url }}">Take a look</a>
								<div class="time">
									<strong>Created:</strong>
									<i class="ace-icon fa fa-clock-o bigger-110"></i>
									{{ post.timestamp}}
								</div>
							</div>
							{% endfor %}

							<div class="tools action-buttons">
								<a href="#" class="blue">
									<i class="ace-icon fa fa-pencil bigger-125"></i>
								</a>

								<a href="#" class="red">
									<i class="ace-icon fa fa-times bigger-125"></i>
								</a>
							</div>
						</div>
					</div>
				</div><!-- /.row -->

				<div class="space-12"></div>

				<div class="center">
					<button type="button" class="btn btn-sm btn-primary btn-white btn-round">
						<i class="ace-icon fa fa-rss bigger-150 middle orange2"></i>
						<span class="bigger-110">View all posts</span>

						<i class="icon-on-right ace-icon fa fa-arrow-right"></i>
					</button>
				</div>
			  </div>

			  <div id="update" class="tab-pane">
				  <div class="row">
						<div class="col-md-6">
								<form method="POST" class="form" enctype="multipart/form-data">
									{% csrf_token %} {{ avatar_form.as_p }}
									<button type="submit" class="btn btn-default">Submit</button>
								</form>
							</div>
				  </div>

			  </div>

			  <div id="friends" class="tab-pane">
				<div class="row">
					<div class="col-md-4">
							<h1>Friends</h1>
							{% for friend in friends_list %}
							<a href="{{ friend.user.profile.get_absolute_url }}">{{ friend.user.username }}</a>
							{% endfor %}
						<hr>
					</div>
					<div class="col-md-4">
							<h2>Sent Friend requests</h2>
							<ul>
							{% for s_request in sent_friend_requests %}
								<li>{{ s_request.to_user.username }}</li>
							{% endfor %}
							</ul>
							<hr>
					</div>
					<div class="col-md-4">
							<h2>Received Friend requests</h2>

							{% for r_request in rec_friend_requests %}
								<p><a href="{{ r_request.from_user.profile.get_absolute_url }}">{{ r_request.from_user.username }}</a></p>
								<small><a class='btn btn-primary' href="/memberships/friend-request/accept/{{ r_request.from_user.id }}">Accept</a></small>
								<small><a class='btn btn-warning' href="/memberships/friend-request/delete/{{ r_request.from_user.id }}">Ignore</a></small>
							{% endfor %}
					</div>
				</div>
			  </div>
			</div>

			</div><!-- /#feed -->
		</div>
	</div>
</div>
{% endblock %}